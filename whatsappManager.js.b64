-----BEGIN CERTIFICATE-----
aW1wb3J0IG1ha2VXQVNvY2tldCwgeyBEaXNjb25uZWN0UmVhc29uLCB1c2VNdWx0
aUZpbGVBdXRoU3RhdGUsIGZldGNoTGF0ZXN0QmFpbGV5c1ZlcnNpb24gfSBmcm9t
ICdAd2hpc2tleXNvY2tldHMvYmFpbGV5cyc7DQppbXBvcnQgeyBCb29tIH0gZnJv
bSAnQGhhcGkvYm9vbSc7DQppbXBvcnQgcXJjb2RlIGZyb20gJ3FyY29kZSc7DQpp
bXBvcnQgcGlubyBmcm9tICdwaW5vJzsNCmltcG9ydCBmcyBmcm9tICdmcyc7DQpp
bXBvcnQgcGF0aCBmcm9tICdwYXRoJzsNCmltcG9ydCB7IGZpbGVVUkxUb1BhdGgg
fSBmcm9tICd1cmwnOw0KaW1wb3J0IHsgZGlybmFtZSB9IGZyb20gJ3BhdGgnOw0K
aW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJzsNCmltcG9ydCB7
IHJ1blF1ZXJ5LCBnZXRRdWVyeSwgYWxsUXVlcnkgfSBmcm9tICcuLi9kYXRhYmFz
ZS9kYXRhYmFzZS5qcyc7DQppbXBvcnQgcHJveHlTZXJ2aWNlIGZyb20gJy4vcHJv
eHlTZXJ2aWNlLmpzJzsNCmltcG9ydCB7IEh0dHBzUHJveHlBZ2VudCB9IGZyb20g
J2h0dHBzLXByb3h5LWFnZW50JzsNCmltcG9ydCB7IFNvY2tzUHJveHlBZ2VudCB9
IGZyb20gJ3NvY2tzLXByb3h5LWFnZW50JzsNCg0KLy8gRVM2IG1vZHVsZSBfX2Rp
cm5hbWUgZXF1aXZhbGVudA0KY29uc3QgX19maWxlbmFtZSA9IGZpbGVVUkxUb1Bh
dGgoaW1wb3J0Lm1ldGEudXJsKTsNCmNvbnN0IF9fZGlybmFtZSA9IGRpcm5hbWUo
X19maWxlbmFtZSk7DQoNCi8vIExvZ2dlciBjb25maWcNCmNvbnN0IGxvZ2dlciA9
IHBpbm8oeyBsZXZlbDogJ3NpbGVudCcgfSk7IC8vICdkZWJ1ZycgZm9yIHZlcmJv
c2UNCg0KY2xhc3MgV2hhdHNBcHBNYW5hZ2VyIGV4dGVuZHMgRXZlbnRFbWl0dGVy
IHsNCiAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgc3VwZXIoKTsNCiAgICAg
ICAgdGhpcy5jbGllbnRzID0gbmV3IE1hcCgpOyAvLyBhY2NvdW50SWQgLT4gc29j
a2V0IGluc3RhbmNlDQogICAgICAgIHRoaXMucXJDb2RlcyA9IG5ldyBNYXAoKTsg
Ly8gYWNjb3VudElkIC0+IHFyIHN0cmluZw0KICAgIH0NCg0KICAgIGFzeW5jIGNy
ZWF0ZUNsaWVudChhY2NvdW50SWQsIGFjY291bnROYW1lKSB7DQogICAgICAgIHRy
eSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhgQ3JlYXRpbmcgQmFpbGV5cyBj
bGllbnQgZm9yIGFjY291bnQgJHthY2NvdW50SWR9ICgke2FjY291bnROYW1lfSlg
KTsNCg0KICAgICAgICAgICAgLy8gQXV0aCBzdGF0ZSBmb2xkZXIgLSB1c2UgX19k
aXJuYW1lIGZvciBhYnNvbHV0ZSBwYXRoDQogICAgICAgICAgICBjb25zdCBhdXRo
UGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICcuYmFpbGV5c19hdXRo
JywgYHNlc3Npb24tJHthY2NvdW50SWR9YCk7DQogICAgICAgICAgICBjb25zb2xl
LmxvZyhgW0RFQlVHXSBBdXRoIHBhdGg6ICR7YXV0aFBhdGh9YCk7DQogICAgICAg
ICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoYXV0aFBhdGgpKSB7DQogICAgICAgICAg
ICAgICAgZnMubWtkaXJTeW5jKGF1dGhQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9
KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSwg
c2F2ZUNyZWRzIH0gPSBhd2FpdCB1c2VNdWx0aUZpbGVBdXRoU3RhdGUoYXV0aFBh
dGgpOw0KICAgICAgICAgICAgY29uc3QgeyB2ZXJzaW9uIH0gPSBhd2FpdCBmZXRj
aExhdGVzdEJhaWxleXNWZXJzaW9uKCk7DQoNCiAgICAgICAgICAgIC8vIFByb3h5
IENvbmZpZ3VyYXRpb24NCiAgICAgICAgICAgIGxldCBhZ2VudCA9IHVuZGVmaW5l
ZDsNCiAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBnZXRRdWVyeSgn
U0VMRUNUIHByb3h5X2lkLCBuZXR3b3JrX21vZGUgRlJPTSBhY2NvdW50cyBXSEVS
RSBpZCA9ID8nLCBbYWNjb3VudElkXSk7DQoNCiAgICAgICAgICAgIGNvbnNvbGUu
bG9nKGBbREVCVUddIEFjY291bnQgJHthY2NvdW50SWR9IC0gTmV0d29yayBNb2Rl
OiAke2FjY291bnQ/Lm5ldHdvcmtfbW9kZX0sIFByb3h5SUQ6ICR7YWNjb3VudD8u
cHJveHlfaWR9YCk7DQoNCiAgICAgICAgICAgIC8vIE9ubHkgYXBwbHkgcHJveHkg
aWYgbmV0d29ya19tb2RlIGlzICdwcm94eScNCiAgICAgICAgICAgIGlmIChhY2Nv
dW50ICYmIGFjY291bnQubmV0d29ya19tb2RlID09PSAncHJveHknICYmIGFjY291
bnQucHJveHlfaWQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwcm94eUNvbmZp
ZyA9IGF3YWl0IHByb3h5U2VydmljZS5nZXRCeUlkKGFjY291bnQucHJveHlfaWQp
Ow0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIFByb3h5IGNv
bmZpZyBmb3VuZDogYCwgcHJveHlDb25maWcpOw0KDQogICAgICAgICAgICAgICAg
aWYgKHByb3h5Q29uZmlnICYmIHByb3h5Q29uZmlnLmFjdGl2ZSAmJiBwcm94eUNv
bmZpZy5ob3N0KSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3RvY29s
ID0gcHJveHlDb25maWcucHJvdG9jb2wgfHwgJ2h0dHAnOw0KICAgICAgICAgICAg
ICAgICAgICBjb25zdCBhdXRoID0gKHByb3h5Q29uZmlnLmF1dGhfZW5hYmxlZCAm
JiBwcm94eUNvbmZpZy51c2VybmFtZSAmJiBwcm94eUNvbmZpZy5wYXNzd29yZCkN
CiAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7cHJveHlDb25maWcudXNlcm5h
bWV9OiR7cHJveHlDb25maWcucGFzc3dvcmR9QGANCiAgICAgICAgICAgICAgICAg
ICAgICAgIDogJyc7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5VXJs
ID0gYCR7cHJvdG9jb2x9Oi8vJHthdXRofSR7cHJveHlDb25maWcuaG9zdH06JHtw
cm94eUNvbmZpZy5wb3J0fWA7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc29s
ZS5sb2coYFtERUJVR10gQ29uc3RydWN0aW5nIHByb3h5IFVSTDogJHtwcm94eVVy
bH1gKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHVzZSBIVFRQL0hU
VFBTIHByb3h5IChTT0NLUzUgY2F1c2VzIGlzc3VlcyB3aXRoIEJhaWxleXMpDQog
ICAgICAgICAgICAgICAgICAgIGlmIChwcm90b2NvbCA9PT0gJ2h0dHAnIHx8IHBy
b3RvY29sID09PSAnaHR0cHMnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAv
LyBDcmVhdGUgYWdlbnQgd2l0aCBleHBsaWNpdCBvcHRpb25zIG1hdGNoaW5nIHRo
ZSBzdWNjZXNzZnVsIGRpYWdub3N0aWMgdGVzdA0KICAgICAgICAgICAgICAgICAg
ICAgICAgYWdlbnQgPSBuZXcgSHR0cHNQcm94eUFnZW50KHByb3h5VXJsLCB7DQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAga2VlcEFsaXZlOiB0cnVlLA0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAwLA0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxpbmc6ICdsaWZvJw0KICAgICAg
ICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICBj
b25zb2xlLmxvZyhg4pyTIFVzaW5nIFBST1hZIG5ldHdvcms6ICR7cHJveHlVcmx9
YCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICBjb25zb2xlLndhcm4oYFByb3h5IHByb3RvY29sICR7cHJvdG9j
b2x9IG5vdCBzdXBwb3J0ZWQgYnkgQmFpbGV5cywgc2tpcHBpbmcgcHJveHlgKTsN
CiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIFByb3h5
IHNraXBwZWQuIEFjdGl2ZTogJHtwcm94eUNvbmZpZz8uYWN0aXZlfSwgSG9zdDog
JHtwcm94eUNvbmZpZz8uaG9zdH1gKTsNCiAgICAgICAgICAgICAgICB9DQogICAg
ICAgICAgICB9IGVsc2UgaWYgKGFjY291bnQgJiYgYWNjb3VudC5uZXR3b3JrX21v
ZGUgPT09ICdsb2NhbCcpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg
4pyTIFVzaW5nIExPQ0FMIG5ldHdvcmsgKHNlcnZlciBkaXJlY3QgY29ubmVjdGlv
bilgKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29u
c29sZS5sb2coYFtERUJVR10gTmV0d29yayBtb2RlOiAke2FjY291bnQ/Lm5ldHdv
cmtfbW9kZSB8fCAndW5kZWZpbmVkJ30sIE5vIHByb3h5IGNvbmZpZ3VyZWRgKTsN
CiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc29sZS5sb2coYEluaXRp
YWxpemluZyBCYWlsZXlzIHdpdGggcHJveHkgYWdlbnQ6ICR7ISFhZ2VudH1gKTsN
Cg0KICAgICAgICAgICAgY29uc3Qgc29jayA9IG1ha2VXQVNvY2tldCh7DQogICAg
ICAgICAgICAgICAgdmVyc2lvbiwNCiAgICAgICAgICAgICAgICBsb2dnZXI6IHBp
bm8oeyBsZXZlbDogJ2RlYnVnJyB9KSwNCiAgICAgICAgICAgICAgICBwcmludFFS
SW5UZXJtaW5hbDogdHJ1ZSwNCiAgICAgICAgICAgICAgICBhdXRoOiBzdGF0ZSwg
Ly8gUmV2ZXJ0IHRvIHNpbXBsZSBhdXRoIHN0YXRlDQogICAgICAgICAgICAgICAg
YnJvd3NlcjogWydXaGF0c0FwcCBXYXJtaW5nJywgJ0Nocm9tZScsICcxLjAuMCdd
LA0KICAgICAgICAgICAgICAgIGFnZW50LA0KICAgICAgICAgICAgICAgIGNvbm5l
Y3RUaW1lb3V0TXM6IDYwMDAwLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRRdWVy
eVRpbWVvdXRNczogNjAwMDAsDQogICAgICAgICAgICAgICAga2VlcEFsaXZlSW50
ZXJ2YWxNczogMTAwMDAsDQogICAgICAgICAgICAgICAgZW1pdE93bkV2ZW50czog
dHJ1ZSwNCiAgICAgICAgICAgICAgICByZXRyeVJlcXVlc3REZWxheU1zOiAyNTAN
CiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBIYW5kbGUgY29ubmVj
dGlvbiB1cGRhdGVzDQogICAgICAgICAgICBzb2NrLmV2Lm9uKCdjb25uZWN0aW9u
LnVwZGF0ZScsIGFzeW5jICh1cGRhdGUpID0+IHsNCiAgICAgICAgICAgICAgICBj
b25zdCB7IGNvbm5lY3Rpb24sIGxhc3REaXNjb25uZWN0LCBxciB9ID0gdXBkYXRl
Ow0KDQogICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyBhbGwgY29ubmVjdGlv
biB1cGRhdGVzDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10g
QWNjb3VudCAke2FjY291bnRJZH0gY29ubmVjdGlvbiB1cGRhdGU6YCwgew0KICAg
ICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLA0KICAgICAgICAgICAgICAgICAg
ICBoYXNRUjogISFxciwNCiAgICAgICAgICAgICAgICAgICAgaGFzTGFzdERpc2Nv
bm5lY3Q6ICEhbGFzdERpc2Nvbm5lY3QsDQogICAgICAgICAgICAgICAgICAgIHVw
ZGF0ZUtleXM6IE9iamVjdC5rZXlzKHVwZGF0ZSkNCiAgICAgICAgICAgICAgICB9
KTsNCg0KICAgICAgICAgICAgICAgIGlmIChxcikgew0KICAgICAgICAgICAgICAg
ICAgICBjb25zb2xlLmxvZyhgUVIgQ29kZSByZWNlaXZlZCBmb3IgYWNjb3VudCAk
e2FjY291bnRJZH1gKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXJEYXRh
VXJsID0gYXdhaXQgcXJjb2RlLnRvRGF0YVVSTChxcik7DQogICAgICAgICAgICAg
ICAgICAgIHRoaXMucXJDb2Rlcy5zZXQoYWNjb3VudElkLCBxckRhdGFVcmwpOw0K
ICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBRUiBDb2Rl
IHN0b3JlZCBmb3IgYWNjb3VudCAke2FjY291bnRJZH0uIE1hcCBzaXplOiAke3Ro
aXMucXJDb2Rlcy5zaXplfSwgSGFzIGtleTogJHt0aGlzLnFyQ29kZXMuaGFzKGFj
Y291bnRJZCl9YCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgncXIn
LCB7IGFjY291bnRJZCwgcXJEYXRhVXJsIH0pOw0KICAgICAgICAgICAgICAgIH0N
Cg0KICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uID09PSAnY2xvc2UnKSB7
DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlY29ubmVjdCA9IChs
YXN0RGlzY29ubmVjdD8uZXJyb3IgaW5zdGFuY2VvZiBCb29tKT8ub3V0cHV0Py5z
dGF0dXNDb2RlICE9PSBEaXNjb25uZWN0UmVhc29uLmxvZ2dlZE91dDsNCiAgICAg
ICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFjY291bnQgJHthY2NvdW50SWR9
IGNvbm5lY3Rpb24gY2xvc2VkIGR1ZSB0byAke2xhc3REaXNjb25uZWN0Py5lcnJv
cn0sIHJlY29ubmVjdGluZzogJHtzaG91bGRSZWNvbm5lY3R9YCk7DQoNCiAgICAg
ICAgICAgICAgICAgICAgaWYgKHNob3VsZFJlY29ubmVjdCkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVDbGllbnQoYWNjb3VudElkLCBhY2Nv
dW50TmFtZSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWNjb3VudCAke2FjY291bnRJ
ZH0gbG9nZ2VkIG91dC5gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0
IHJ1blF1ZXJ5KCdVUERBVEUgYWNjb3VudHMgU0VUIHN0YXR1cyA9ID8sIHVwZGF0
ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBXSEVSRSBpZCA9ID8nLCBbJ2Rpc2Nv
bm5lY3RlZCcsIGFjY291bnRJZF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAg
dGhpcy5jbGllbnRzLmRlbGV0ZShhY2NvdW50SWQpOw0KICAgICAgICAgICAgICAg
ICAgICAgICAgdGhpcy5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7IGFjY291bnRJZCwg
cmVhc29uOiAnTG9nZ2VkIG91dCcgfSk7DQogICAgICAgICAgICAgICAgICAgICAg
ICAvLyBDbGVhbiB1cCBhdXRoIGZvbGRlciByZXF1aXJlZD8gTWF5YmUgbm90IHRv
IGtlZXAgaGlzdG9yeSBpZiByZS1sb2dpbg0KICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb25uZWN0aW9uID09PSAnb3Bl
bicpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFjY291bnQg
JHthY2NvdW50SWR9IGNvbm5lY3RlZCBzdWNjZXNzZnVsbHlgKTsNCiAgICAgICAg
ICAgICAgICAgICAgY29uc3QgdXNlckppZCA9IHNvY2sudXNlci5pZC5zcGxpdCgn
OicpWzBdOyAvLyBmb3JtYXQ6IDEyMzQ1OjVAcy53aGF0c2FwcC5uZXQNCg0KICAg
ICAgICAgICAgICAgICAgICBhd2FpdCBydW5RdWVyeSgNCiAgICAgICAgICAgICAg
ICAgICAgICAgICdVUERBVEUgYWNjb3VudHMgU0VUIHN0YXR1cyA9ID8sIHBob25l
ID0gPywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QIFdIRVJFIGlkID0g
PycsDQogICAgICAgICAgICAgICAgICAgICAgICBbJ2Nvbm5lY3RlZCcsIHVzZXJK
aWQsIGFjY291bnRJZF0NCiAgICAgICAgICAgICAgICAgICAgKTsNCg0KICAgICAg
ICAgICAgICAgICAgICB0aGlzLnFyQ29kZXMuZGVsZXRlKGFjY291bnRJZCk7DQog
ICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50cy5zZXQoYWNjb3VudElkLCBz
b2NrKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyZWFkeScsIHsg
YWNjb3VudElkLCBwaG9uZTogdXNlckppZCB9KTsNCiAgICAgICAgICAgICAgICAg
ICAgdGhpcy5lbWl0KCdhdXRoZW50aWNhdGVkJywgeyBhY2NvdW50SWQgfSk7DQog
ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAg
IC8vIENyZWRlbnRpYWwgdXBkYXRlcw0KICAgICAgICAgICAgc29jay5ldi5vbign
Y3JlZHMudXBkYXRlJywgc2F2ZUNyZWRzKTsNCg0KICAgICAgICAgICAgLy8gTWVz
c2FnZSBoYW5kbGluZw0KICAgICAgICAgICAgc29jay5ldi5vbignbWVzc2FnZXMu
dXBzZXJ0JywgYXN5bmMgKG0pID0+IHsNCiAgICAgICAgICAgICAgICBpZiAobS50
eXBlID09PSAnbm90aWZ5Jykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGNv
bnN0IG1zZyBvZiBtLm1lc3NhZ2VzKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoIW1zZy5rZXkuZnJvbU1lICYmIG1zZy5tZXNzYWdlKSB7DQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIG1lc3NhZ2UgdG8gbWF0
Y2ggcGFydGlhbGx5IHdoYXQgdGhlIGFwcCBleHBlY3RzDQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY29uc3QgcmVtb3RlSmlkID0gbXNnLmtleS5yZW1vdGVK
aWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dEJvZHkg
PSBtc2cubWVzc2FnZS5jb252ZXJzYXRpb24gfHwgbXNnLm1lc3NhZ2UuZXh0ZW5k
ZWRUZXh0TWVzc2FnZT8udGV4dCB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjb25zdCBoYXNNZWRpYSA9ICEhKG1zZy5tZXNzYWdlLmltYWdlTWVz
c2FnZSB8fCBtc2cubWVzc2FnZS52aWRlb01lc3NhZ2UgfHwgbXNnLm1lc3NhZ2Uu
c3RpY2tlck1lc3NhZ2UgfHwgbXNnLm1lc3NhZ2UuYXVkaW9NZXNzYWdlKTsNCg0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRNZXNz
YWdlID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBy
ZW1vdGVKaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6
IHRleHRCb2R5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNN
ZWRpYTogaGFzTWVkaWEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHR5cGU6IGhhc01lZGlhID8gJ21lZGlhJyA6ICdjaGF0JywgLy8gU2ltcGxpZmll
ZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG1z
Zy5tZXNzYWdlVGltZXN0YW1wLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBfZGF0YTogbXNnIC8vIEtlZXAgb3JpZ2luYWwganVzdCBpbiBjYXNlDQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIHsgYWNjb3VudElkLCBt
ZXNzYWdlOiBub3JtYWxpemVkTWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAg
ICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICB0aGlzLmNsaWVudHMu
c2V0KGFjY291bnRJZCwgc29jayk7DQogICAgICAgICAgICByZXR1cm4gc29jazsN
Cg0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29s
ZS5lcnJvcihgRXJyb3IgY3JlYXRpbmcgY2xpZW50IGZvciBhY2NvdW50ICR7YWNj
b3VudElkfTpgLCBlcnJvcik7DQogICAgICAgICAgICB0aHJvdyBlcnJvcjsNCiAg
ICAgICAgfQ0KICAgIH0NCg0KICAgIGdldENsaWVudChhY2NvdW50SWQpIHsNCiAg
ICAgICAgcmV0dXJuIHRoaXMuY2xpZW50cy5nZXQoYWNjb3VudElkKTsNCiAgICB9
DQoNCiAgICBnZXRRUkNvZGUoYWNjb3VudElkKSB7DQogICAgICAgIGNvbnN0IHFy
ID0gdGhpcy5xckNvZGVzLmdldChhY2NvdW50SWQpOw0KICAgICAgICBjb25zb2xl
LmxvZyhgW0RFQlVHXSBnZXRRUkNvZGUgY2FsbGVkIGZvciBhY2NvdW50ICR7YWNj
b3VudElkfS4gTWFwIHNpemU6ICR7dGhpcy5xckNvZGVzLnNpemV9LCBIYXMga2V5
OiAke3RoaXMucXJDb2Rlcy5oYXMoYWNjb3VudElkKX0sIFFSIGV4aXN0czogJHsh
IXFyfWApOw0KICAgICAgICByZXR1cm4gcXI7DQogICAgfQ0KDQogICAgLy8gQmFp
bGV5cyBkaXNjb25uZWN0IGltcGxpZXMgZW5kaW5nIHRoZSBzb2NrZXQNCiAgICBh
c3luYyBkaXNjb25uZWN0Q2xpZW50KGFjY291bnRJZCkgew0KICAgICAgICBjb25z
dCBzb2NrID0gdGhpcy5jbGllbnRzLmdldChhY2NvdW50SWQpOw0KICAgICAgICBp
ZiAoc29jaykgew0KICAgICAgICAgICAgc29jay5lbmQodW5kZWZpbmVkKTsNCiAg
ICAgICAgICAgIHRoaXMuY2xpZW50cy5kZWxldGUoYWNjb3VudElkKTsNCiAgICAg
ICAgICAgIGF3YWl0IHJ1blF1ZXJ5KA0KICAgICAgICAgICAgICAgICdVUERBVEUg
YWNjb3VudHMgU0VUIHN0YXR1cyA9ID8sIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJ
TUVTVEFNUCBXSEVSRSBpZCA9ID8nLA0KICAgICAgICAgICAgICAgIFsnZGlzY29u
bmVjdGVkJywgYWNjb3VudElkXQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0K
ICAgIH0NCg0KICAgIGlzQ29ubmVjdGVkKGFjY291bnRJZCkgew0KICAgICAgICBy
ZXR1cm4gdGhpcy5jbGllbnRzLmhhcyhhY2NvdW50SWQpOw0KICAgIH0NCg0KICAg
IGFzeW5jIHNlbmRNZXNzYWdlKGFjY291bnRJZCwgdG8sIG1lc3NhZ2UpIHsNCiAg
ICAgICAgY29uc3Qgc29jayA9IHRoaXMuZ2V0Q2xpZW50KGFjY291bnRJZCk7DQog
ICAgICAgIGlmICghc29jaykgdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgbm90IGZv
dW5kIGZvciBhY2NvdW50ICR7YWNjb3VudElkfWApOw0KDQogICAgICAgIHRyeSB7
DQogICAgICAgICAgICBjb25zdCBqaWQgPSB0by5pbmNsdWRlcygnQHMud2hhdHNh
cHAubmV0JykgPyB0byA6IGAke3RvfUBzLndoYXRzYXBwLm5ldGA7DQogICAgICAg
ICAgICBhd2FpdCBzb2NrLnNlbmRNZXNzYWdlKGppZCwgeyB0ZXh0OiBtZXNzYWdl
IH0pOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gY2F0Y2gg
KGVycm9yKSB7DQogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzZW5k
aW5nIG1lc3NhZ2UgZnJvbSBhY2NvdW50ICR7YWNjb3VudElkfTpgLCBlcnJvcik7
DQogICAgICAgICAgICB0aHJvdyBlcnJvcjsNCiAgICAgICAgfQ0KICAgIH0NCg0K
ICAgIC8vIFNlbmQgbWVkaWENCiAgICBhc3luYyBzZW5kTWVkaWEoYWNjb3VudElk
LCB0bywgbWVkaWFQYXRoLCBjYXB0aW9uID0gJycsIGlzU3RpY2tlciA9IGZhbHNl
KSB7DQogICAgICAgIGNvbnN0IHNvY2sgPSB0aGlzLmdldENsaWVudChhY2NvdW50
SWQpOw0KICAgICAgICBpZiAoIXNvY2spIHRocm93IG5ldyBFcnJvcihgQ2xpZW50
IG5vdCBmb3VuZCBmb3IgYWNjb3VudCAke2FjY291bnRJZH1gKTsNCg0KICAgICAg
ICB0cnkgew0KICAgICAgICAgICAgY29uc3QgamlkID0gdG8uaW5jbHVkZXMoJ0Bz
LndoYXRzYXBwLm5ldCcpID8gdG8gOiBgJHt0b31Acy53aGF0c2FwcC5uZXRgOw0K
ICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gZnMucmVhZEZpbGVTeW5jKG1lZGlh
UGF0aCk7DQoNCiAgICAgICAgICAgIGlmIChpc1N0aWNrZXIpIHsNCiAgICAgICAg
ICAgICAgICBhd2FpdCBzb2NrLnNlbmRNZXNzYWdlKGppZCwgeyBzdGlja2VyOiBi
dWZmZXIgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
IC8vIERldGVjdCB0eXBlIHJvdWdobHkgYnkgZXh0ZW5zaW9uIG9yIGFzc3VtZSBp
bWFnZSBmb3Igc2ltcGxpY2l0eSBpbiB0aGlzIGNvbnRleHQNCiAgICAgICAgICAg
ICAgICAvLyBJZGVhbGx5IHVzZSAnZmlsZS10eXBlJyBwYWNrYWdlDQogICAgICAg
ICAgICAgICAgYXdhaXQgc29jay5zZW5kTWVzc2FnZShqaWQsIHsgaW1hZ2U6IGJ1
ZmZlciwgY2FwdGlvbjogY2FwdGlvbiB9KTsNCiAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0K
ICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2VuZGluZyBtZWRpYSBm
cm9tIGFjY291bnQgJHthY2NvdW50SWR9OmAsIGVycm9yKTsNCiAgICAgICAgICAg
IHRocm93IGVycm9yOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgYXN5bmMgcmVz
dG9yZVNlc3Npb25zKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29u
c3QgYWNjb3VudHMgPSBhd2FpdCBhbGxRdWVyeSgnU0VMRUNUICogRlJPTSBhY2Nv
dW50cyBXSEVSRSBzdGF0dXMgPSA/JywgWydjb25uZWN0ZWQnXSk7DQogICAgICAg
ICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgYWNjb3VudHMpIHsNCiAgICAgICAg
ICAgICAgICAvLyBDaGVjayBpZiBhdXRoIGZpbGUgZXhpc3RzDQogICAgICAgICAg
ICAgICAgY29uc3QgYXV0aFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4n
LCAnLmJhaWxleXNfYXV0aCcsIGBzZXNzaW9uLSR7YWNjb3VudC5pZH1gKTsNCiAg
ICAgICAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhhdXRoUGF0aCkpIHsNCiAg
ICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVDbGllbnQoYWNjb3Vu
dC5pZCwgYWNjb3VudC5uYW1lKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0K
ICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgTm8gc2Vzc2lvbiBmaWxl
IGZvdW5kIGZvciBhY2NvdW50ICR7YWNjb3VudC5pZH0sIHNraXBwaW5nIGF1dG8t
cmVzdG9yZS5gKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIERCIHRv
IGRpc2Nvbm5lY3RlZD8gTWF5YmUuDQogICAgICAgICAgICAgICAgICAgIGF3YWl0
IHJ1blF1ZXJ5KCdVUERBVEUgYWNjb3VudHMgU0VUIHN0YXR1cyA9ID8gV0hFUkUg
aWQgPSA/JywgWydkaXNjb25uZWN0ZWQnLCBhY2NvdW50LmlkXSk7DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlcnJv
cikgew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVzdG9yaW5n
IHNlc3Npb25zOicsIGVycm9yKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KY29u
c3Qgd2hhdHNhcHBNYW5hZ2VyID0gbmV3IFdoYXRzQXBwTWFuYWdlcigpOw0KZXhw
b3J0IGRlZmF1bHQgd2hhdHNhcHBNYW5hZ2VyOw0K
-----END CERTIFICATE-----
